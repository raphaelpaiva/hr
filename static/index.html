<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>O gravador sem cabe√ßa</title>
    
    <script src="/static/js/tailwind.min.js"></script>
    
    <style type="text/tailwindcss">
        @layer components {
            .state-recording { @apply text-red-600; }
            .state-new { @apply text-yellow-500; }
            .state-stopped { @apply text-green-600; }
            /* Cores para os indicadores de sa√∫de */
            .health-green { @apply text-green-400; }
            .health-yellow { @apply text-yellow-400; }
            .health-red { @apply text-red-500 font-bold; }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-900 pt-20">

    <nav class="fixed top-0 left-0 right-0 bg-slate-900 text-white z-50 shadow-md">
        <div class="max-w-7xl mx-auto px-4 h-16 flex items-center justify-between">
            <a class="text-xl font-bold tracking-tight" href="#">O Gravador Sem Cabe√ßa</a>
            
            <div class="flex items-center gap-6">
                <div id="systemHealth" class="flex items-center gap-4 border-r border-slate-700 pr-6 text-sm font-mono">
                    <div id="stat-load" title="Carga do Sistema">
                        <span class="text-slate-400 mr-1">üìä</span><span class="value">--</span>
                    </div>
                    <div id="stat-mem" title="Uso de Mem√≥ria">
                        <span class="text-slate-400 mr-1">üß†</span><span class="value">--%</span>
                    </div>
                    <div id="stat-disk" title="Espa√ßo em Disco">
                        <span class="text-slate-400 mr-1">üíæ</span><span class="value">--%</span>
                    </div>
                </div>

                <button id="btnShutdown" 
                        onclick="shutdownSystem()"
                        class="bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors shadow-sm">
                    Desligar
                </button>
            </div>
        </div>
    </nav>

    <div class="max-w-7xl mx-auto px-4 py-8"> 
        <h1 class="text-3xl font-extrabold mb-8 text-slate-800 text-center md:text-left">Painel de Controle</h1>

        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8">
            <h3 class="text-xl font-semibold mb-4 text-slate-700">Nova Grava√ß√£o</h3>
            <div class="flex flex-wrap items-center gap-4">
                <select id="deviceSelect" class="flex-1 min-w-[250px] bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5">
                    <option value="" disabled selected>Carregando dispositivos...</option>
                </select>
                <button id="btnRecord" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2.5 px-6 rounded-lg transition-all shadow-sm">
                    Iniciar Grava√ß√£o
                </button>
            </div>
            <div id="lastRecordResult" class="hidden mt-4 p-4 bg-blue-50 rounded-lg border border-blue-100 text-blue-800 font-mono text-sm"></div>
            <p id="statusMsg" class="mt-2 text-sm h-5"></p>
        </div>

        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-semibold text-slate-700">Grava√ß√µes Ativas</h3>
                <button onclick="loadRecordings()" class="bg-slate-100 hover:bg-slate-200 text-slate-600 text-sm font-semibold py-2 px-4 rounded-lg transition-colors">
                    ‚Üª Atualizar
                </button>
            </div>
            <div class="overflow-x-auto rounded-lg border border-gray-200">
                <table id="recordingsTable" class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-4 py-3 text-center text-xs font-semibold text-gray-500 uppercase">A√ß√µes</th>
                            <th class="px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase">ID</th>
                            <th class="px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase">Dispositivo</th>
                            <th class="px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase">Estado</th>
                            <th class="px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase">Criado em</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200"></tbody>
                </table>
            </div>
        </div>

        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-semibold text-slate-700">Hist√≥rico</h3>
                <button onclick="loadHistory()" class="bg-slate-100 hover:bg-slate-200 text-slate-600 text-sm font-semibold py-2 px-4 rounded-lg transition-colors">
                    ‚Üª Atualizar
                </button>
            </div>
            <div class="overflow-x-auto rounded-lg border border-gray-200">
                <table id="historyTable" class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-4 py-3 text-center text-xs font-semibold text-gray-500 uppercase">Download</th>
                            <th class="px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase">ID</th>
                            <th class="px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase">Dispositivo</th>
                            <th class="px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase">Estado</th>
                            <th class="px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase">Modifica√ß√£o</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200"></tbody>
                </table>
            </div>
        </div>
    </div> 

    <script src="/static/js/hr.js"></script>
</body>
</html>